# Phase 1 구현 계획

## 개요

Phase 1 MVP 구현을 위한 상세 작업 계획입니다.

**기간**: 4-6주  
**목표**: 핵심 기능 검증 및 사용자 피드백 수집

---

## 작업 진행 기록

### 작업 1.1: 프로젝트 기본 구조 설정

**상태**: ✅ 완료  
**계획 문서**: `plan/01_project_structure.md`  
**테스트 파일**: `tests/test_01_project_structure.py`  
**계획 작성 시간**: 2025-12-21 22:15:45  
**구현 시작 시간**: 2025-12-21 22:53:15  
**구현 완료 시간**: 2025-12-21 22:54:15  
**테스트 완료 시간**: 2025-12-21 22:55:54  
**작업 기록 시간**: 2025-12-21 22:56:03  
**소요 시간**: 약 40분

**진행 단계**:

- [x] 계획 작성 (2025-12-21 22:15:45)
- [x] 구현 (2025-12-21 22:53:15 - 22:54:15)
- [x] 테스트 (2025-12-21 22:55:54) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-21 22:56:03)

**구현 내용**:

- ✅ 프로젝트 디렉토리 구조 생성 완료 (pages, modules, shared, data, config, plan, tests)
- ✅ requirements.txt 작성 완료 (streamlit, pandas, plotly, python-dotenv)
- ✅ .gitignore 작성 완료
- ✅ README.md 작성 완료
- ✅ 각 디렉토리에 **init**.py 파일 생성 완료

**테스트 결과**:

- 총 6개 테스트 중 6개 통과 ✅
  - 디렉토리 존재 확인: 통과
  - requirements.txt 검증: 통과
  - .gitignore 검증: 통과
  - README.md 검증: 통과
  - .env.example 검증: 통과 (선택적)
  - **init**.py 파일 확인: 통과

---

### 작업 1.2: 세션 상태 관리 모듈

**상태**: ✅ 완료  
**계획 문서**: `plan/02_session_manager.md`  
**테스트 파일**: `tests/test_02_session_manager.py`  
**계획 작성 시간**: 2025-12-21 22:56:38  
**구현 시작 시간**: 2025-12-21 23:00:47  
**구현 완료 시간**: 2025-12-21 23:01:00  
**테스트 완료 시간**: 2025-12-21 23:02:30  
**작업 기록 시간**: 2025-12-21 23:02:45  
**소요 시간**: 약 2분

**진행 단계**:

- [x] 계획 작성 (2025-12-21 22:56:38)
- [x] 구현 (2025-12-21 22:57:00 - 22:57:30)
- [x] 테스트 (2025-12-21 23:02:30) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-21 23:02:45)

**구현 내용**:

- ✅ `shared/session_manager.py` 파일 생성
- ✅ `init_session_state()` 함수 구현
  - 입력 데이터 초기화 (9개 필드)
  - 페이지별 계산 완료 상태 초기화 (3개)
  - 페이지별 결과 저장소 초기화 (3개)
- ✅ `get_shared_inputs()` 함수 구현
  - 세션 상태에서 입력 데이터 딕셔너리 반환
  - 기본값 처리 포함

**테스트 결과**:

- 총 5개 테스트 중 5개 통과 ✅
  - 세션 상태 초기화: 통과
  - 세션 상태 초기화 멱등성: 통과
  - 공유 입력 데이터 반환: 통과
  - 세션 상태 변경 반영: 통과
  - 기본값 반환: 통과

---

### 작업 1.3: 공통 입력 폼 컴포넌트

**상태**: ✅ 완료  
**계획 문서**: `plan/03_input_form.md`  
**테스트 파일**: `tests/test_03_input_form.py`  
**계획 작성 시간**: 2025-12-21 23:02:26  
**구현 시작 시간**: 2025-12-21 23:05:27  
**구현 완료 시간**: 2025-12-21 23:05:49  
**테스트 완료 시간**: 2025-12-21 23:06:57  
**작업 기록 시간**: 2025-12-21 23:07:20  
**소요 시간**: 약 2분

**진행 단계**:

- [x] 계획 작성 (2025-12-21 23:02:26)
- [x] 구현 (2025-12-21 23:05:27 - 23:05:49)
- [x] 테스트 (2025-12-21 23:06:57) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-21 23:07:20)

**구현 내용**:

- ✅ `shared/input_form.py` 파일 생성
- ✅ `render_input_form()` 함수 구현
  - 사이드바에 입력 폼 렌더링
  - 9개 입력 필드 구현 (기본 정보, 소득 정보, 소비 정보, 자산 및 부채)
  - 세션 상태 업데이트 로직
  - 도움말 텍스트 추가

**테스트 결과**:

- 총 4개 테스트 중 4개 통과 ✅
  - 반환값이 딕셔너리인지 확인: 통과
  - 필수 키 포함 확인: 통과
  - 세션 상태 업데이트 확인: 통과
  - sidebar 메서드 호출 확인: 통과

---

### 작업 1.4: 입력 검증 모듈

**상태**: ✅ 완료  
**계획 문서**: `plan/04_validators.md`  
**테스트 파일**: `tests/test_04_validators.py`  
**계획 작성 시간**: 2025-12-21 23:09:00  
**구현 시작 시간**: 2025-12-21 23:09:20  
**구현 완료 시간**: 2025-12-21 23:09:50  
**테스트 완료 시간**: 2025-12-21 23:10:45  
**작업 기록 시간**: 2025-12-21 23:10:53  
**소요 시간**: 약 2분

**진행 단계**:

- [x] 계획 작성 (2025-12-21 23:09:00)
- [x] 구현 (2025-12-21 23:09:20 - 23:09:50)
- [x] 테스트 (2025-12-21 23:10:45) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-21 23:10:53)

**구현 내용**:

- ✅ `modules/validators.py` 파일 생성
- ✅ 개별 필드 검증 함수 구현
  - `validate_age()`, `validate_retirement_age()`
  - `validate_salary()`, `validate_salary_growth_rate()`
  - `validate_expense()`, `validate_assets()`, `validate_debt()`
- ✅ `validate_inputs()` 함수 구현 (전체 검증)
- ✅ `validate_logical_consistency()` 함수 구현 (논리적 일관성 검증)
- ✅ 한국어 오류 메시지 작성

**테스트 결과**:

- 총 15개 테스트 중 15개 통과 ✅
  - 유효한 입력 검증: 통과
  - 음수 입력 검증 실패: 통과
  - 범위 초과 검증 실패: 통과
  - 논리적 일관성 검증: 통과
  - 경계값 검증: 통과

---

### 작업 1.5: 소득 및 지출 계산 로직 구현

**상태**: 계획 작성 완료  
**계획 문서**: `plan/05_calculations_income.md`  
**계획 작성 시간**: 2025-12-21 23:12:00  
**구현 시작 시간**: -  
**구현 완료 시간**: -  
**테스트 완료 시간**: -

**진행 단계**:

- [x] 계획 작성 (2025-12-21 23:12:00)
- [ ] 구현
- [ ] 테스트
- [ ] 작업 기록

---

### 작업 1.6: 리스크 계산 로직 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/06_calculations_risk.md`  
**테스트 파일**: `tests/test_06_calculations_risk.py`  
**계획 작성 시간**: 2025-12-21 23:22:44  
**구현 시작 시간**: 2025-12-21 23:22:55  
**구현 완료 시간**: 2025-12-21 23:23:31  
**테스트 완료 시간**: 2025-12-21 23:24:06  
**작업 기록 시간**: 2025-12-21 23:24:21  
**소요 시간**: 약 1분 10초

**진행 단계**:

- [x] 계획 작성 (2025-12-21 23:22:44)
- [x] 구현 (2025-12-21 23:22:55 - 23:23:31)
- [x] 테스트 (2025-12-21 23:24:06) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-21 23:24:21)

**구현 내용**:

- ✅ `calculate_income_interruption_survival()` 함수 구현
  - 소득 중단 시 생존 가능 기간 계산
  - 상태 판단 (safe, warning, danger)
- ✅ `calculate_crisis_scenario()` 함수 구현
  - 경제 위기 시나리오 계산 (30%, 50% 하락)
  - 위기 후 생존 가능 기간 계산
- ✅ `calculate_retirement_sustainability()` 함수 구현
  - 은퇴 시점 예상 자산 계산
  - 은퇴 후 생활비 유지 가능 여부 판단
- ✅ `calculate_risk_score()` 함수 구현
  - 종합 위험도 점수 계산 (0-100)
  - 위험도 등급 산출 (low, medium, high, critical)
  - 권장사항 생성

**테스트 결과**:

- 총 10개 테스트 중 10개 통과 ✅
  - 소득 중단 생존 기간 (안전/경고/위험): 통과
  - 경제 위기 시나리오 (30%, 50%): 통과
  - 은퇴 시나리오: 통과
  - 위험도 점수 (낮은/높은 위험, 세부 항목): 통과

---

### 작업 1.7: 시나리오 비교 계산 로직 구현

**상태**: 계획 작성 완료  
**계획 문서**: `plan/07_calculations_scenario.md`  
**상태**: ✅ 완료  
**계획 문서**: `plan/07_calculations_scenario.md`  
**테스트 파일**: `tests/test_07_calculations_scenario.py`  
**계획 작성 시간**: 2025-12-21 23:27:19  
**구현 시작 시간**: 2025-12-21 23:27:30  
**구현 완료 시간**: 2025-12-21 23:27:48  
**테스트 완료 시간**: 2025-12-21 23:28:16  
**작업 기록 시간**: -  
**소요 시간**: 약 1분

**진행 단계**:

- [x] 계획 작성 (2025-12-21 23:27:19)
- [x] 구현 (2025-12-21 23:27:30 - 23:27:48)
- [x] 테스트 (2025-12-21 23:28:16) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-21 23:28:30)

**구현 내용**:

- ✅ `parse_scenario()` 함수 구현
  - 시나리오 문자열 파싱 (지출 감소, 연봉 증가 등)
  - 복합 시나리오 파싱 지원
- ✅ `calculate_scenario()` 함수 구현
  - 시나리오를 입력 데이터에 적용
  - 미래 자산 계산
- ✅ `compare_scenarios()` 함수 구현
  - 여러 시나리오 동시 비교
  - 최고/최저 시나리오 식별
  - 차이 계산

**테스트 결과**:

- 총 10개 테스트 중 10개 통과 ✅
  - 시나리오 파싱 (현재 패턴, 지출 감소, 연봉 증가, 복합): 통과
  - 시나리오 계산 (지출 감소, 연봉 증가, 기본 비교): 통과
  - 여러 시나리오 비교 (기본, 최고/최저, 차이): 통과

---

### 작업 1.8: 데이터 포맷팅 모듈 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/08_formatters.md`  
**테스트 파일**: `tests/test_08_formatters.py`  
**계획 작성 시간**: 2025-12-21 23:31:20  
**구현 시작 시간**: 2025-12-21 23:31:31  
**구현 완료 시간**: 2025-12-21 23:32:00  
**테스트 완료 시간**: 2025-12-21 23:32:40  
**작업 기록 시간**: 2025-12-21 23:32:53  
**소요 시간**: 약 1분 30초

**진행 단계**:

- [x] 계획 작성 (2025-12-21 23:31:20)
- [x] 구현 (2025-12-21 23:31:31 - 23:32:00)
- [x] 테스트 (2025-12-21 23:32:40) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-21 23:32:53)

**구현 내용**:

- ✅ `modules/formatters.py` 파일 생성
- ✅ 숫자 포맷팅 함수 구현
  - `format_currency()` - 금액 포맷팅
  - `format_percentage()` - 퍼센트 포맷팅
  - `format_number()` - 일반 숫자 포맷팅
- ✅ 인사이트 텍스트 생성 함수 구현
  - `generate_financial_health_insight()` - 재정 건전성 인사이트
  - `generate_risk_insight()` - 위험도 인사이트
  - `generate_future_assets_insight()` - 미래 자산 인사이트
  - `generate_retirement_insight()` - 은퇴 인사이트
- ✅ `get_status_message()` 함수 구현

**테스트 결과**:

- 총 9개 테스트 중 9개 통과 ✅
  - 숫자 포맷팅 (금액, 퍼센트, 일반): 통과
  - 재정 건전성 인사이트 (A+, D): 통과
  - 위험도 인사이트: 통과
  - 미래 자산 인사이트: 통과
  - 은퇴 인사이트: 통과
  - 상태 메시지: 통과

---

### 작업 1.9: 시각화 모듈 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/09_visualizations.md`  
**테스트 파일**: `tests/test_09_visualizations.py`  
**계획 작성 시간**: 2025-12-22 07:42:13  
**구현 시작 시간**: 2025-12-22 07:42:27  
**구현 완료 시간**: 2025-12-22 07:43:09  
**테스트 완료 시간**: 2025-12-22 07:45:30  
**작업 기록 시간**: 2025-12-22 07:45:45  
**소요 시간**: 약 3분

**진행 단계**:

- [x] 계획 작성 (2025-12-22 07:42:13)
- [x] 구현 (2025-12-22 07:42:27 - 07:43:09)
- [x] 테스트 (2025-12-22 07:45:30) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 07:45:45)

**구현 내용**:

- ✅ `modules/visualizations.py` 파일 생성
- ✅ `create_future_assets_chart()` 함수 구현
  - 연도별 자산 변화 선 그래프
- ✅ `create_financial_health_gauge()` 함수 구현
  - 재정 건전성 등급 게이지 차트
- ✅ `create_risk_score_chart()` 함수 구현
  - 위험도 점수 게이지 차트
- ✅ `create_risk_breakdown_chart()` 함수 구현
  - 위험도 점수 세부 항목 막대 그래프
- ✅ `create_scenario_comparison_chart()` 함수 구현
  - 여러 시나리오 비교 선 그래프
- ✅ `create_survival_chart()` 함수 구현
  - 소득 중단 생존 기간 막대 그래프

**테스트 결과**:

- 총 7개 테스트 중 7개 통과 ✅
  - 미래 자산 추정 차트: 통과
  - 재정 건전성 등급 게이지: 통과
  - 위험도 점수 차트: 통과
  - 위험도 점수 세부 항목: 통과
  - 시나리오 비교 차트: 통과
  - 소득 중단 생존 기간 차트: 통과

---

### 작업 1.10: 홈 페이지 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/10_home_page.md`  
**테스트 파일**: `tests/test_10_home_page.py`  
**계획 작성 시간**: 2025-12-22 08:33:06  
**구현 시작 시간**: 2025-12-22 08:33:54  
**구현 완료 시간**: 2025-12-22 08:34:14  
**테스트 완료 시간**: 2025-12-22 08:35:00  
**작업 기록 시간**: 2025-12-22 08:35:34  
**소요 시간**: 약 2분

**진행 단계**:

- [x] 계획 작성 (2025-12-22 08:33:06)
- [x] 구현 (2025-12-22 08:33:54 - 08:34:14)
- [x] 테스트 (2025-12-22 08:35:00) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 08:35:34)

**구현 내용**:

- ✅ `app.py` 파일 생성
- ✅ 프로젝트 소개 섹션 구현
- ✅ 빠른 시작 가이드 섹션 구현
- ✅ 기능 미리보기 섹션 구현
- ✅ 면책 조항 및 데이터 출처 섹션 구현
- ✅ 사이드바 입력 폼 연동
- ✅ 세션 상태 초기화

**테스트 결과**:

- 총 3개 테스트 중 3개 통과 ✅
  - 페이지 파일 존재 및 구조: 통과
  - 세션 상태 초기화 모듈 로드: 통과
  - 입력 폼 모듈 존재 확인: 통과

---

### 작업 1.11: 페이지 1 - 소득 지출 분석 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/11_page1_income.md`  
**테스트 파일**: `tests/test_11_page1_income.py`  
**계획 작성 시간**: 2025-12-22 08:40:06  
**구현 시작 시간**: 2025-12-22 08:40:20  
**구현 완료 시간**: 2025-12-22 08:40:48  
**테스트 완료 시간**: 2025-12-22 08:41:20  
**작업 기록 시간**: 2025-12-22 08:41:52  
**소요 시간**: 약 1분 30초

**진행 단계**:

- [x] 계획 작성 (2025-12-22 08:40:06)
- [x] 구현 (2025-12-22 08:40:20 - 08:40:48)
- [x] 테스트 (2025-12-22 08:41:20) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 08:41:52)

**구현 내용**:

- ✅ `pages/` 디렉토리 생성
- ✅ `pages/1_소득_지출_분석.py` 파일 생성
- ✅ 페이지 헤더 구현
- ✅ 입력 데이터 요약 구현
- ✅ 계산 로직 연동
- ✅ 결과 표시 구현
- ✅ 시각화 연동
- ✅ 인사이트 텍스트 표시
- ✅ 데이터 출처 표시
- ✅ 에러 처리 구현

**테스트 결과**:

- 총 3개 테스트 중 3개 통과 ✅
  - 페이지 파일 존재 확인: 통과
  - 페이지 구조 확인: 통과
  - 핵심 모듈 import 확인: 통과

---

### 작업 1.12: 페이지 2 - 리스크 시나리오 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/12_page2_risk.md`  
**테스트 파일**: `tests/test_12_page2_risk.py`  
**계획 작성 시간**: 2025-12-22 10:01:21  
**구현 시작 시간**: 2025-12-22 10:01:35  
**구현 완료 시간**: 2025-12-22 10:02:29  
**테스트 완료 시간**: 2025-12-22 10:02:53  
**작업 기록 시간**: 2025-12-22 10:03:11  
**소요 시간**: 약 2분

**진행 단계**:

- [x] 계획 작성 (2025-12-22 10:01:21)
- [x] 구현 (2025-12-22 10:01:35 - 10:02:29)
- [x] 테스트 (2025-12-22 10:02:53) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 10:03:11)

**구현 내용**:

- ✅ `pages/2_리스크_시나리오.py` 파일 생성
- ✅ 페이지 헤더 구현
- ✅ 입력 데이터 요약 구현
- ✅ 리스크 계산 로직 연동
- ✅ 결과 표시 구현
- ✅ 시각화 연동
- ✅ 인사이트 텍스트 표시
- ✅ 데이터 출처 표시
- ✅ 에러 처리 구현

**테스트 결과**:

- 총 3개 테스트 중 3개 통과 ✅
  - 페이지 파일 존재 확인: 통과
  - 페이지 구조 확인: 통과
  - 핵심 모듈 import 확인: 통과

---

### 작업 1.13: 페이지 3 - 시나리오 비교 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/13_page3_comparison.md`  
**테스트 파일**: `tests/test_13_page3_comparison.py`  
**계획 작성 시간**: 2025-12-22 14:16:26  
**구현 시작 시간**: 2025-12-22 14:16:40  
**구현 완료 시간**: 2025-12-22 14:17:21  
**테스트 완료 시간**: 2025-12-22 14:17:45  
**작업 기록 시간**: 2025-12-22 14:18:03  
**소요 시간**: 약 1분 40초

**진행 단계**:

- [x] 계획 작성 (2025-12-22 14:16:26)
- [x] 구현 (2025-12-22 14:16:40 - 14:17:21)
- [x] 테스트 (2025-12-22 14:17:45) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 14:18:03)

**구현 내용**:

- ✅ `pages/3_시나리오_비교.py` 파일 생성
- ✅ 페이지 헤더 구현
- ✅ 시나리오 입력 UI 구현
- ✅ 시나리오 계산 로직 연동
- ✅ 시나리오 비교 결과 표시
- ✅ 시각화 연동
- ✅ 차이점 분석 표시
- ✅ 데이터 출처 표시
- ✅ 에러 처리 구현

**테스트 결과**:

- 총 3개 테스트 중 3개 통과 ✅
  - 페이지 파일 존재 확인: 통과
  - 페이지 구조 확인: 통과
  - 핵심 모듈 import 확인: 통과

---

### 작업 1.14: 샘플 데이터 기능 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/14_sample_data.md`  
**테스트 파일**: `tests/test_14_sample_data.py`  
**계획 작성 시간**: 2025-12-22 18:42:49  
**구현 시작 시간**: 2025-12-22 18:43:06  
**구현 완료 시간**: 2025-12-22 18:43:31  
**테스트 완료 시간**: 2025-12-22 18:43:57  
**작업 기록 시간**: 2025-12-22 18:44:13  
**소요 시간**: 약 1분

**진행 단계**:

- [x] 계획 작성 (2025-12-22 18:42:49)
- [x] 구현 (2025-12-22 18:43:06 - 18:43:31)
- [x] 테스트 (2025-12-22 18:43:57) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 18:44:13)

**구현 내용**:

- ✅ `data/sample_data.py` 파일 생성
- ✅ 샘플 데이터 시나리오 정의 (4개: 일반 직장인, 신입 직장인, 중년 직장인, 은퇴 준비 중)
- ✅ 샘플 데이터 적용 함수 구현
- ✅ 입력 폼에 샘플 데이터 선택 UI 추가
- ✅ 테스트 작성

**테스트 결과**:

- 총 5개 테스트 중 5개 통과 ✅
  - 샘플 시나리오 목록 반환: 통과
  - 특정 시나리오 데이터 반환: 통과
  - 존재하지 않는 시나리오 에러 처리: 통과
  - 샘플 데이터 적용: 통과
  - 샘플 데이터 구조 검증: 통과

---

### 작업 1.15: 결과 다운로드 기능 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/15_download.md`  
**테스트 파일**: `tests/test_15_download.py`  
**계획 작성 시간**: 2025-12-22 18:46:34  
**구현 시작 시간**: 2025-12-22 18:46:50  
**구현 완료 시간**: 2025-12-22 18:47:53  
**테스트 완료 시간**: 2025-12-22 18:48:30  
**작업 기록 시간**: 2025-12-22 18:48:36  
**소요 시간**: 약 2분

**진행 단계**:

- [x] 계획 작성 (2025-12-22 18:46:34)
- [x] 구현 (2025-12-22 18:46:50 - 18:47:53)
- [x] 테스트 (2025-12-22 18:48:30) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 18:48:36)

**구현 내용**:

- ✅ `modules/download.py` 파일 생성
- ✅ 다운로드 데이터 생성 함수 구현
- ✅ JSON 다운로드 함수 구현
- ✅ CSV 다운로드 함수 구현 (pandas 없이도 동작)
- ✅ 각 페이지에 다운로드 버튼 추가
- ✅ 테스트 작성

**테스트 결과**:

- 총 5개 테스트 중 5개 통과 ✅
  - 다운로드 데이터 생성: 통과
  - JSON 다운로드 데이터 생성: 통과
  - CSV 다운로드 데이터 생성: 통과
  - 다운로드 파일명 생성: 통과
  - 다운로드 데이터 구조 검증: 통과

---

### 작업 1.16: 에러 처리 및 사용자 안내 구현

**상태**: ✅ 완료  
**계획 문서**: `plan/16_error_handling.md`  
**테스트 파일**: `tests/test_16_error_handling.py`  
**계획 작성 시간**: 2025-12-22 18:52:52  
**구현 시작 시간**: 2025-12-22 18:53:06  
**구현 완료 시간**: 2025-12-22 18:54:10  
**테스트 완료 시간**: 2025-12-22 18:54:39  
**작업 기록 시간**: 2025-12-22 18:54:56  
**소요 시간**: 약 2분

**진행 단계**:

- [x] 계획 작성 (2025-12-22 18:52:52)
- [x] 구현 (2025-12-22 18:53:06 - 18:54:10)
- [x] 테스트 (2025-12-22 18:54:39) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 18:54:56)

**구현 내용**:

- ✅ `modules/utils.py` 파일 생성
- ✅ `safe_calculate()` 함수 구현
- ✅ `get_user_friendly_error_message()` 함수 구현
- ✅ `validate_calculation_inputs()` 함수 구현
- ✅ 각 페이지에 에러 처리 적용
- ✅ 테스트 작성

**테스트 결과**:

- 총 9개 테스트 중 9개 통과 ✅
  - 정상적인 계산: 통과
  - 0으로 나누기 에러 처리: 통과
  - ValueError 처리: 통과
  - KeyError 처리: 통과
  - 사용자 친화적인 에러 메시지 생성: 통과
  - 유효한 입력값 검증: 통과
  - 누락된 필수 필드 검증: 통과
  - 잘못된 나이 검증: 통과
  - 음수 입력값 검증: 통과

---

### 작업 1.17: 통합 테스트 및 최종 점검

**상태**: ✅ 완료  
**계획 문서**: `plan/17_integration_test.md`  
**테스트 파일**: `tests/test_integration.py`  
**계획 작성 시간**: 2025-12-22 18:56:20  
**구현 시작 시간**: 2025-12-22 18:57:31  
**구현 완료 시간**: 2025-12-22 18:58:41  
**테스트 완료 시간**: 2025-12-22 19:01:00  
**작업 기록 시간**: 2025-12-22 19:01:15  
**소요 시간**: 약 5분

**진행 단계**:

- [x] 계획 작성 (2025-12-22 18:56:20)
- [x] 구현 (2025-12-22 18:57:31 - 18:58:41)
- [x] 테스트 (2025-12-22 19:01:00) - 모든 테스트 통과
- [x] 작업 기록 (2025-12-22 19:01:15)

**구현 내용**:

- ✅ 통합 테스트 스크립트 작성 (`tests/test_integration.py`)
- ✅ 전체 워크플로우 테스트 구현
- ✅ 세션 상태 관리 테스트
- ✅ 에러 처리 테스트
- ✅ 포맷팅 및 인사이트 생성 테스트
- ✅ 다운로드 기능 테스트

**테스트 결과**:

- 총 11개 테스트 중 11개 통과 ✅
  - 세션 상태 관리: 통과
  - 샘플 데이터 적용: 통과
  - 입력 검증: 통과
  - 소득 지출 계산: 통과
  - 리스크 계산: 통과
  - 시나리오 비교: 통과
  - 에러 처리: 통과
  - 포맷팅: 통과
  - 인사이트 생성: 통과
  - 다운로드 데이터 생성: 통과
  - 전체 워크플로우: 통과

**최종 점검 결과**:

- ✅ 모든 페이지 파일 존재 확인
- ✅ 모든 모듈 파일 존재 확인
- ✅ 통합 테스트 모두 통과
- ✅ README.md 최신 상태

---

## 작업 단계별 계획

### Week 1-2: 기본 구조 및 입력 폼

#### 1.1 프로젝트 기본 구조 설정

**작업 내용**:

- [ ] 프로젝트 디렉토리 구조 생성
- [ ] `requirements.txt` 작성 (streamlit, pandas, plotly 등)
- [ ] `.gitignore` 작성
- [ ] `README.md` 작성 (프로젝트 소개, 설치 방법)
- [ ] `.env.example` 작성 (환경 변수 예시)

**파일 구조**:

```
finance-simulator/
├── app.py
├── pages/
│   ├── 1_소득_지출_분석.py
│   ├── 2_리스크_시나리오.py
│   └── 3_시나리오_비교.py
├── modules/
│   ├── calculations.py
│   ├── validators.py
│   ├── formatters.py
│   └── visualizations.py
├── shared/
│   ├── input_form.py
│   └── session_manager.py
├── data/
│   └── defaults.py
├── config/
│   └── constants.py
├── requirements.txt
├── .env.example
├── .gitignore
└── README.md
```

**예상 시간**: 0.5일

---

#### 1.2 세션 상태 관리 모듈

**파일**: `shared/session_manager.py`

**작업 내용**:

- [ ] `init_session_state()` 함수 구현
  - 입력 데이터 초기화 (current_age, retirement_age, salary 등)
  - 페이지별 계산 완료 상태 초기화
  - 페이지별 결과 저장소 초기화
- [ ] `get_shared_inputs()` 함수 구현
  - 세션 상태에서 입력 데이터 반환
- [ ] 세션 상태 구조 정의

**예상 시간**: 0.5일

---

#### 1.3 공통 입력 폼 컴포넌트

**파일**: `shared/input_form.py`

**작업 내용**:

- [ ] `render_input_form()` 함수 구현
  - 사이드바에 입력 폼 렌더링
  - 기본 정보 (나이, 은퇴 나이)
  - 소득 정보 (연봉, 연봉 증가율, 보너스)
  - 소비 정보 (월 지출, 연간 고정 지출)
  - 자산 및 부채 (총 자산, 총 부채)
  - 세션 상태에 입력 데이터 저장
- [ ] 입력 필드 기본값 설정
- [ ] 도움말 텍스트 추가

**예상 시간**: 1일

---

#### 1.4 입력 검증 모듈

**파일**: `modules/validators.py`

**작업 내용**:

- [ ] `validate_inputs()` 함수 구현
  - 필수 입력 확인
  - 범위 검증 (나이, 금액 등)
  - 논리적 검증 (은퇴 나이 > 현재 나이 등)
  - 에러 및 경고 메시지 반환
- [ ] `is_input_valid()` 함수 구현 (간단 버전)
- [ ] `clean_number_input()` 함수 구현 (숫자 입력 정제)

**예상 시간**: 1일

---

### Week 3-4: 계산 로직 구현

#### 2.1 소득 및 지출 계산 로직

**파일**: `modules/calculations.py`

**작업 내용**:

- [ ] `calculate_future_assets()` 함수 구현
  - 연도별 자산 변화 계산
  - 연봉 증가율 반영
  - 연간 저축액 계산
- [ ] `calculate_financial_health_grade()` 함수 구현
  - 저축률 계산
  - 등급 평가 (A~F)
- [ ] `perform_calculations_income()` 함수 구현
  - 소득 지출 분석 페이지용 통합 계산

**예상 시간**: 2일

---

#### 2.2 리스크 계산 로직

**파일**: `modules/calculations.py`

**작업 내용**:

- [ ] `calculate_survival_months()` 함수 구현
  - 소득 중단 시 생존 가능 기간 계산
- [ ] `calculate_crisis_survival()` 함수 구현
  - 경제 위기 시나리오 (자산 하락률 반영)
- [ ] `check_retirement_viability()` 함수 구현
  - 은퇴 시 생활비 유지 가능 여부
- [ ] `calculate_risk_score()` 함수 구현
  - 위험도 점수 계산 (0-100)
- [ ] `perform_calculations_risk()` 함수 구현
  - 리스크 시나리오 페이지용 통합 계산

**예상 시간**: 2일

---

#### 2.3 시나리오 비교 계산 로직

**파일**: `modules/calculations.py`

**작업 내용**:

- [ ] `parse_scenario()` 함수 구현
  - 시나리오 이름 파싱 ("지출 -10%", "연봉 +5%" 등)
  - 입력 데이터 수정
- [ ] `calculate_scenario()` 함수 구현
  - 시나리오별 계산 수행
- [ ] `perform_calculations_comparison()` 함수 구현
  - 시나리오 비교 페이지용 통합 계산

**예상 시간**: 1.5일

---

#### 2.4 데이터 포맷팅 모듈

**파일**: `modules/formatters.py`

**작업 내용**:

- [ ] `format_number()` 함수 구현
  - 숫자 포맷팅 (만원, 억 단위)
- [ ] `generate_insight_text()` 함수 구현
  - 사용자 친화적인 인사이트 텍스트 생성
  - 출처 및 가정 포함
- [ ] `generate_scenario_insight()` 함수 구현
  - 시나리오별 비교 인사이트
- [ ] `create_comparison_table()` 함수 구현
  - 시나리오 비교 테이블 생성 (pandas DataFrame)
- [ ] `render_data_source()` 함수 구현
  - 계산 유형별 출처 표시 UI

**예상 시간**: 1.5일

---

#### 2.5 시각화 모듈

**파일**: `modules/visualizations.py`

**작업 내용**:

- [ ] `create_asset_timeline_chart()` 함수 구현
  - 연도별 자산 변화 선 그래프 (Plotly)
- [ ] `create_scenario_comparison_chart()` 함수 구현
  - 시나리오별 비교 그래프 (Plotly)
- [ ] 차트 스타일링 (색상, 레이아웃 등)

**예상 시간**: 1일

---

### Week 5: UI 구현

#### 3.1 홈 페이지

**파일**: `app.py`

**작업 내용**:

- [ ] 프로젝트 소개 섹션
- [ ] 빠른 시작 가이드
- [ ] 기능 소개
- [ ] 면책 조항 표시
- [ ] 네비게이션 (사이드바 자동 생성)

**예상 시간**: 0.5일

---

#### 3.2 페이지 1: 소득 지출 분석

**파일**: `pages/1_소득_지출_분석.py`

**작업 내용**:

- [ ] 페이지 설정 (제목, 레이아웃)
- [ ] 공통 입력 폼 렌더링
- [ ] 계산 버튼 및 검증
- [ ] 결과 표시:
  - 핵심 메트릭 (10년 후 자산, 재정 건전성 등급, 월 저축액)
  - 연도별 자산 변화 그래프
  - 인사이트 텍스트
- [ ] 데이터 출처 표시
- [ ] 다운로드 기능

**예상 시간**: 2일

---

#### 3.3 페이지 2: 리스크 시나리오

**파일**: `pages/2_리스크_시나리오.py`

**작업 내용**:

- [ ] 페이지 설정
- [ ] 공통 입력 폼 렌더링
- [ ] 계산 버튼 및 검증
- [ ] 결과 표시:
  - 위험도 점수
  - 소득 중단 시나리오
  - 경제 위기 시나리오
  - 은퇴 시나리오
- [ ] 데이터 출처 표시
- [ ] 다운로드 기능

**예상 시간**: 2일

---

#### 3.4 페이지 3: 시나리오 비교

**파일**: `pages/3_시나리오_비교.py`

**작업 내용**:

- [ ] 페이지 설정
- [ ] 공통 입력 폼 렌더링
- [ ] 시나리오 선택 UI (multiselect)
- [ ] 계산 버튼 및 검증
- [ ] 결과 표시:
  - 시나리오별 비교 그래프
  - 시나리오별 비교 테이블
  - 시나리오별 인사이트
- [ ] 데이터 출처 표시
- [ ] 다운로드 기능

**예상 시간**: 1.5일

---

#### 3.5 추가 기능

**작업 내용**:

- [ ] 샘플 데이터 기능 구현
  - 샘플 시나리오 정의 (`data/defaults.py`)
  - 샘플 데이터 적용 함수
  - 사이드바에 샘플 데이터 선택 UI
- [ ] 결과 다운로드 기능
  - JSON 다운로드
  - CSV 다운로드 (시나리오 비교)
- [ ] 에러 처리 및 사용자 안내
  - `safe_calculate()` 래퍼 함수
  - 에러 메시지 표시
  - 계산 실패 시 안내

**예상 시간**: 1.5일

---

### Week 6: 테스트 및 배포

#### 4.1 단위 테스트

**파일**: `tests/test_calculations.py`, `tests/test_validators.py`

**작업 내용**:

- [ ] `calculate_future_assets()` 테스트
- [ ] `calculate_financial_health_grade()` 테스트
- [ ] `calculate_survival_months()` 테스트
- [ ] `calculate_risk_score()` 테스트
- [ ] `validate_inputs()` 테스트
- [ ] `parse_scenario()` 테스트

**예상 시간**: 1일

---

#### 4.2 통합 테스트

**작업 내용**:

- [ ] 전체 워크플로우 테스트
- [ ] 페이지 간 데이터 공유 테스트
- [ ] 에러 처리 테스트
- [ ] UI 요소 렌더링 테스트

**예상 시간**: 0.5일

---

#### 4.3 배포 준비

**작업 내용**:

- [ ] Streamlit Cloud 배포 설정
  - GitHub 저장소 생성
  - `requirements.txt` 최종 확인
  - `.streamlit/config.toml` 설정 (선택)
- [ ] 배포 및 테스트
- [ ] 문서화 업데이트

**예상 시간**: 0.5일

---

## 작업 우선순위

### 높은 우선순위 (필수)

1. 프로젝트 기본 구조 설정
2. 세션 상태 관리 모듈
3. 공통 입력 폼 컴포넌트
4. 입력 검증 모듈
5. 소득 및 지출 계산 로직
6. 리스크 계산 로직
7. 페이지 1: 소득 지출 분석
8. 페이지 2: 리스크 시나리오

### 중간 우선순위 (중요)

9. 시나리오 비교 계산 로직
10. 데이터 포맷팅 모듈
11. 시각화 모듈
12. 페이지 3: 시나리오 비교
13. 데이터 출처 표시 UI

### 낮은 우선순위 (선택)

14. 샘플 데이터 기능
15. 결과 다운로드 기능
16. 단위 테스트
17. 통합 테스트

---

## 예상 작업 시간

| 작업                           | 예상 시간  |
| ------------------------------ | ---------- |
| Week 1-2: 기본 구조 및 입력 폼 | 3일        |
| Week 3-4: 계산 로직 구현       | 8일        |
| Week 5: UI 구현                | 7.5일      |
| Week 6: 테스트 및 배포         | 2일        |
| **총계**                       | **20.5일** |

**참고**: 실제 작업 시간은 개발자 경험과 프로젝트 복잡도에 따라 달라질 수 있습니다.

---

## 의존성 관계

```
프로젝트 구조 설정
    ↓
세션 상태 관리 모듈
    ↓
공통 입력 폼 컴포넌트 ← 입력 검증 모듈
    ↓
계산 로직 모듈들
    ↓
데이터 포맷팅 모듈 ← 시각화 모듈
    ↓
각 페이지 구현
    ↓
테스트 및 배포
```

---

## 최근 주요 변경 사항 (2025-12-22)

### UI/UX 개선
- ✅ 입력 필드를 사이드바에서 페이지 상단으로 이동 (4개 컬럼 배치)
- ✅ 모든 필수 입력 필드 초기값을 빈 값(None)으로 설정
- ✅ 시뮬레이션 버튼은 모든 필수 항목 입력 후 활성화
- ✅ 시뮬레이션 버튼 클릭 후 결과 표시 (슬라이더 변경 시에도 유지)
- ✅ 페이지 간 이동 시 입력 필드 자동 초기화

### 지출 구조 개선
- ✅ 월 지출/연간 고정 지출 → 월간 고정비/월간 변동비로 변경
- ✅ 총 월 지출 자동 계산 및 표시

### 인플레이션 및 은퇴 계획 강화
- ✅ 사용자 입력 인플레이션율 추가 (기본값 2.5%)
- ✅ 인플레이션을 고정비, 변동비 모두에 적용
- ✅ 은퇴 후 생활비 슬라이더 추가 (가구 형태별 평균값)
- ✅ 은퇴 후 의료비 슬라이더 추가 (평균값 45만원)
- ✅ 가구 형태 선택 추가 (부부/1인 가구)
- ✅ 자산 추이 그래프 X축을 연도에서 나이로 변경
- ✅ 평균 수명(83세)까지 자산 추정

### 은퇴 자금 목표 계산 기능 추가
- ✅ 4% 현금화율 기준 목표 자산 계산
- ✅ 매달 저축 금액과 연간 수익률의 역관계 시각화
- ✅ 인터랙티브 그래프 (저축 금액 vs 수익률)
- ✅ 최적 조합 제안 기능

## 체크리스트

### 개발 시작 전

- [x] `phase1_design.md` 검토 완료
- [x] `data_sources.md` 검토 완료
- [x] 개발 환경 설정 (Python, 가상환경)
- [x] Git 저장소 초기화

### 개발 중

- [x] 각 모듈 구현 후 간단한 테스트
- [x] 코드 리뷰 (가능한 경우)
- [x] 문서화 업데이트

### 배포 전

- [x] 모든 기능 테스트 완료
- [x] 에러 처리 확인
- [x] UI/UX 검토
- [x] 데이터 출처 표시 확인
- [x] 면책 조항 표시 확인

---

## 리스크 및 대응 방안

### 리스크 1: 계산 로직 복잡도

**대응**: 단계별 구현 및 테스트

### 리스크 2: Streamlit Cloud 배포 이슈

**대응**: 로컬 테스트 충분히 수행 후 배포

### 리스크 3: 데이터 출처 검증 지연

**대응**: Phase 1은 현재 문서의 값으로 진행, Phase 2에서 검증

---

## 다음 단계 (Phase 2)

- API 연동 (한국은행 ECOS, 통계청 KOSIS)
- 데이터 출처 검증 및 업데이트
- 추가 기능 구현 (기회비용 분석, 부동산 분석 등)
- Notion 연동 검토

---

이 계획을 기반으로 Phase 1 구현을 시작하세요.
