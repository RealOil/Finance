# 지출 구조 분석 및 제안

## 현재 구조

### 현재 입력 필드
- **월 지출** (`monthly_expense`): 월 평균 지출액
- **연간 고정 지출** (`annual_fixed_expense`): 보험료, 세금 등 연간 고정 지출

### 현재 계산 방식
```python
monthly_total_expense = monthly_expense + (annual_fixed_expense / 12)
monthly_savings = monthly_income - monthly_total_expense
```

### 문제점
1. **고정비와 변동비 구분 없음**: 절감 가능 여부를 파악하기 어려움
2. **저축/투자 금액 불명확**: 실제 저축액과 투자액을 알 수 없음
3. **재정 관리 인사이트 제한적**: 어디를 줄일 수 있는지 명확하지 않음

---

## 제안 구조

### 옵션 1: 고정비/변동비 분리 (최소 변경)
```
- 월간 고정비 (주거비, 보험료, 통신비 등)
- 월간 변동비 (식비, 교통비, 여가비 등)
```

**장점:**
- 재정 관리에 실용적
- 절감 가능 항목 파악 용이
- Phase 1에서 구현 가능

**단점:**
- 저축/투자 금액은 여전히 계산으로만 추정

### 옵션 2: 고정비/변동비 + 저축비/투자비 분리
```
- 월간 고정비
- 월간 변동비
- 월간 저축비
- 월간 투자비
```

**장점:**
- 가장 정확한 재정 분석
- 저축/투자 전략 시뮬레이션 가능
- Phase 2 확장에 유리

**단점:**
- 입력 필드 증가 (사용자 부담)
- 계산 로직 복잡도 증가
- Phase 1에서 과도할 수 있음

### 옵션 3: 고정비/변동비 + 저축비 (투자비는 저축비에 포함)
```
- 월간 고정비
- 월간 변동비
- 월간 저축비 (저축 + 투자 포함)
```

**장점:**
- 균형잡힌 구조
- Phase 1에 적합
- 투자비는 Phase 2에서 분리 가능

**단점:**
- 투자 수익률 계산 시 정확도 제한

---

## 추천안

### Phase 1: 고정비/변동비 분리
**이유:**
1. 재정 관리의 핵심은 고정비/변동비 구분
2. 절감 가능 항목 파악이 중요
3. 구현 복잡도가 적절함
4. 사용자 입력 부담이 적음

**구조:**
```
- 월간 고정비 (주거비, 보험료, 통신비, 대출이자 등)
- 월간 변동비 (식비, 교통비, 여가비, 쇼핑 등)
```

**계산:**
```python
monthly_total_expense = monthly_fixed_expense + monthly_variable_expense
monthly_savings = monthly_income - monthly_total_expense
```

### Phase 2: 저축비/투자비 추가
**이유:**
1. 투자 수익률 계산 정확도 향상
2. 저축 vs 투자 전략 비교 가능
3. Phase 1 검증 후 추가

**구조:**
```
- 월간 고정비
- 월간 변동비
- 월간 저축비 (예금, 적금 등)
- 월간 투자비 (주식, 펀드, ETF 등)
```

---

## 구현 시 고려사항

### 1. 기존 데이터 호환성
- 기존 `monthly_expense`와 `annual_fixed_expense`를 어떻게 변환할지
- 마이그레이션 전략 필요

### 2. 계산 로직 변경
- 모든 계산 함수에서 지출 계산 방식 변경 필요
- `calculate_future_assets`, `calculate_monthly_savings` 등

### 3. 검증 로직
- 고정비 + 변동비 = 총 지출 검증
- 소득 대비 지출 비율 검증

### 4. 인사이트 생성
- 고정비 비율이 높으면 절감 어려움 경고
- 변동비 비율이 높으면 절감 가능성 제시

---

## 결론

**Phase 1 추천: 고정비/변동비 분리**

이유:
1. ✅ 재정 관리에 실용적
2. ✅ 구현 복잡도 적절
3. ✅ 사용자 입력 부담 적음
4. ✅ Phase 2 확장 용이

저축비/투자비는 Phase 2에서 추가하는 것을 권장합니다.

